function MiniPlayPrerollManager(k){var j,d,c={ima:false,vast:false,adsenseAd4Games:false,html:false},f={adDisabled:false,adInitialized:false,adDisplayed:false,adCompleted:false,adRequests:[],adRequestsCompleted:[],adFallbacks:[],allAdsFailed:false,adBlockPresent:false},h=null,i={debug:false,devel:false,enabled:false,playerUrl:null,targetSelectorId:null,message:"The game will start automatically in xx seconds",linksMessage:"Links will open in a new window.",skipMessage:"Skip to content",ads:{imaTags:[],imaTagsNames:[],tags:[],tagsNames:[],alternativeAdsense4gamesTags:[],alternativeAdsense4gamesTagsNames:[],alternativeHtml:null},handlerType:"game",autoTimeoutFull:130000,autoTimeoutFullWithAdblock:25000,imaPlayerWidth:640,imaPlayerHeight:480,imaPlayerAutoAlign:true};if(k===undefined||!k instanceof Object){k={}}if(k.hasOwnProperty("ads")&&k.ads.hasOwnProperty("imaTags")&&!(k.ads.imaTags instanceof Array)){var g=k.ads.imaTags;k.ads.imaTags=[];k.ads.imaTagsNames=[];for(var l in g){k.ads.imaTags.push(g[l]);k.ads.imaTagsNames.push(l)}}$.extend(true,i,k);if(isNaN(i.imaPlayerWidth)){i.imaPlayerWidth=640}if(isNaN(i.imaPlayerHeight)){i.imaPlayerHeight=480}if(!i.ads instanceof Object){throw new Error("Ads property must be an object")}d=new MiniPlayPrerollManagerHandlerDispatcher(i,f);this.workers=c;this.dispatcher=d;j=function(){let check=false;(function(m){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(m)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(m.substr(0,4))){check=true
}})(navigator.userAgent||navigator.vendor||window.opera);return check};this.display=function(){if(i.targetSelectorId){h=$("#"+i.targetSelectorId)}if(i.enabled&&h&&h.size()>0){d.triggerEvent("ad_ready",{target:h});d.triggerEvent("ad_dispatch",f);d.triggerEvent("ad_request","ima");setTimeout(function(){try{c.ima(function(){d.triggerEvent("ad_request_completed","ima");d.triggerEvent("ad_fallback","ima");d.triggerEvent("ad_request","vast");c.vast(function(){d.triggerEvent("ad_request_completed","vast");d.triggerEvent("ad_fallback","vast");d.triggerEvent("ad_request","adsenseAd4Games");c.ima(function(){d.triggerEvent("ad_request_completed","adsenseAd4Games");d.triggerEvent("ad_fallback","adsenseAd4Games");d.triggerEvent("ad_request","html");c.html(function(){d.triggerEvent("ad_request_completed","html");d.triggerEvent("ad_fallback","html");d.triggerEvent("all_ads_failed");d.triggerEvent("ad_completed",f)},function(){d.triggerEvent("ad_request_completed","html")})},function(){d.triggerEvent("ad_request_completed","adsenseAd4Games")},{vast:i.ads.alternativeAdsense4gamesTags,names:i.ads.alternativeAdsense4gamesTagsNames})},function(){d.triggerEvent("ad_request_completed","vast")})},function(){d.triggerEvent("ad_request_completed","ima")},{vast:i.ads.imaTags,names:i.ads.imaTagsNames})}catch(m){d.debug("Exception "+m);d.triggerEvent("ad_disabled");d.triggerEvent("ad_completed",f)}},500)}else{d.debug("Ads not enabled or targetElement not found "+i.targetSelectorId);d.triggerEvent("ad_disabled");d.triggerEvent("ad_completed",f)}setTimeout(function(){if(!f.adCompleted){d.triggerEvent("ad_completed",f)}},parseInt(f.adBlockPresent?i.autoTimeoutFullWithAdblock:i.autoTimeoutFull,10))};this.displayIma=function(m,n){if(i.targetSelectorId){h=$("#"+i.targetSelectorId)}if(i.enabled&&h&&h.size()>0){d.triggerEvent("ad_dispatch",f);d.triggerEvent("ad_request","ima");setTimeout(function(){try{c.ima(m,n,{vast:i.ads.imaTags,names:i.ads.imaTagsNames})}catch(o){d.debug("Exception "+o);d.triggerEvent("ad_disabled");
d.triggerEvent("ad_completed",f)}},500)}else{d.debug("Ads not enabled or targetElement not found "+i.targetSelectorId);d.triggerEvent("ad_disabled");d.triggerEvent("ad_completed",f)}setTimeout(function(){if(!f.adCompleted){d.triggerEvent("ad_completed",f)}},parseInt(f.adBlockPresent?i.autoTimeoutFullWithAdblock:i.autoTimeoutFull,10))};var e=function(m,r,q){var o=0;var n=false;if(f.adBlockPresent){return m()}if(q===undefined||!q.hasOwnProperty("vast")||!q.hasOwnProperty("names")){d.debug("!!! Invalid tagsObject provided to ImaInstance, halting ima..");console.error("Invalid tagsObject provided to ImaInstance, halting ima..");return m()}if(q.vast.length>0&&h.size()>0){try{$.getScript("//imasdk.googleapis.com/js/sdkloader/ima3"+(i.debug?"_debug":"")+".js",function(){var K;var E;var L;var G;var P;var s;var Q;var I;var N;var y;var A=false;var B;var t={tag:"",name:""};var u="#asfg-click-to-play";function H(){var T=parseInt(i.imaPlayerWidth,10),R=parseInt(i.imaPlayerHeight,10),S;if(i.imaPlayerAutoAlign===true){S="position:absolute;top:50%;left:50%;margin-top:-"+(Math.round(R/2))+"px;margin-left:-"+(Math.round(T/2))+"px;"}else{S="position:absolute;top:0;left:0;"}Q=$('<video id="asfg-video" style="display:none;width:'+T+"px;height:"+R+"px;"+S+'"><source src="//s3.amazonaws.com/demo.jwplayer.com/player-demos/assets/preroll.mp4"></source></video>');I=$('<div id="asfg-ad" style="width:'+T+"px;height:"+R+"px;"+S+'"></div>');N=$(u);if(N.length===0){N=$("<button class='asfg-button-no-text' id='asfg-click-to-play' role='button'><i class='ic ic-play-circ'></i></button>");h.append(N)}h.prepend(Q);h.prepend(I);s=Q[0];G=I[0];y=N[0];y.style.display="none";C()}function M(){if(!A){I.remove();Q.remove();if(K){K.destroy()}A=true}}function C(){google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);if(!F()){m();M();return}}function F(){if(q.length<=o){return false}B=new google.ima.AdsRequest();B.setAdWillAutoPlay(true);x();E=new google.ima.AdsLoader(L);E.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(T){J(T);
var S=function(U){if(typeof U!="undefined"&&U){U.stopPropagation()}s.load();z();N.remove();d.triggerEvent("ad_play","ima",t.name)};N.click("*",S);s.load();var R=$("#loader-canvas");if(R.length>0){R.remove()}d.triggerEvent("ad_available","ima",t.name);if(!j()){S()}else{y.style.display="block";if(N&&N.length>0){N.trigger("click")}}},false);E.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v,false);B.adTagUrl=q.vast[o];t.name=q.names[o];t.tag=q.vast[o];B.linearAdSlotWidth=i.imaPlayerWidth;B.linearAdSlotHeight=i.imaPlayerHeight;B.nonLinearAdSlotWidth=i.imaPlayerWidth;B.nonLinearAdSlotHeight=i.imaPlayerHeight;B.vastLoadTimeout=15000;d.debug("Requesting ads for IMA tag '"+q.names[o]+"' : "+B.adTagUrl);E.requestAds(B);n=true;return true}function x(){L=new google.ima.AdDisplayContainer(G,s);L.initialize()}function z(){try{K.init(i.imaPlayerWidth,i.imaPlayerHeight,google.ima.ViewMode.NORMAL);K.start()}catch(R){s.play()}}function J(S){d.debug("IMA event: Ads manager loaded");var R=new google.ima.AdsRenderingSettings();R.restoreCustomPlaybackStateOnAdBreakComplete=true;R.loadVideoTimeout=12000;K=S.getAdsManager(s,R);K.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v);K.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,O);K.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,D);K.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,w);K.addEventListener(google.ima.AdEvent.Type.LOADED,w);K.addEventListener(google.ima.AdEvent.Type.STARTED,w);K.addEventListener(google.ima.AdEvent.Type.COMPLETE,w);K.addEventListener(google.ima.AdEvent.Type.SKIPPED,w);K.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,w)}function w(R){if(A){d.debug("IMA event: "+R.type+" IGNORED (ALREADY DESTROYED) for tag "+q.names[o]);return}else{d.debug("IMA event: "+R.type+" for tag "+q.names[o])}var S=R.getAd();switch(R.type){case google.ima.AdEvent.Type.LOADED:if(!S.isLinear()){d.debug("Non-linear ads are not supported");m();M()}break;case google.ima.AdEvent.Type.STARTED:d.triggerEvent("ad_play","ima",q.names[o]);
break;case google.ima.AdEvent.Type.SKIPPED:case google.ima.AdEvent.Type.USER_CLOSE:case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:if(!n){if(!f.adCompleted){if(r!==undefined&&typeof r==="function"){r()}d.triggerEvent("ad_completed",f);M()}break}}n=false}function v(R){console.log(R.getError());if(o<(q.vast.length-1)){d.debug("Passback called to next tag");o++;if(!F()){m();M()}}else{d.debug("No remaining tags available");m();M()}}function O(){s.pause()}function D(){s.play()}H()})}catch(p){d.debug("adsense4games error: "+p.message);m()}}else{d.debug("No adsense4games tag available");m()}};c.ima=e;c.vast=function(n,r){var s=i.ads.tags.length;var m=0;var p;var q=false;var o=function(){d.debug("setAutoPassbackTimeout()");clearTimeout(p);p=setTimeout(function(){q=true;d.debug("VAST autopassback timeout called, skipping worker completely");if(typeof SMInPage!="undefined"&&SMInPage){SMInPage.destroy()}SMInPage.frameContainer.parentNode.removeChild(SMInPage.frameContainer);window.SMAdEvent=function(){d.debug("IGNORED (by autopassback) Vast SMAdEvent ("+a+", "+b+") called for tag #"+m+": "+i.ads.tags[m])};window.SMpassBack=function(){};window.SMCallback=function(){};n()},f.adBlockPresent?2000:14000)};if(s>0){o();window.SMCallback=function(t){d.debug("Vast SMCallback called for tag #"+m+": "+i.ads.tags[m],t)};window.SMpassBack=function(u,t){d.debug("Vast SMpassBack called for tag #"+m+": "+i.ads.tags[m])};window.SMAdEvent=function(u,t){clearTimeout(p);d.debug("Vast SMAdEvent ("+u+", "+t+") called for tag #"+m+": "+i.ads.tags[m]);if(f.adDisplayed){if(u==="end"&&(t==="completed")){SMInPage.destroy();if(r!==undefined&&typeof r==="function"){r()}d.triggerEvent("ad_completed",f)}if(u==="end"&&(t==="empty")){SMInPage.destroy();if(r!==undefined&&typeof r==="function"){r()}d.triggerEvent("ad_completed",f)}}else{if(u==="start"&&!f.adDisplayed){d.triggerEvent("ad_play","vast",i.ads.tagsNames[m])}else{if((u==="end"&&t==="empty")||(u==="end"&&t==="completed")){if(typeof SMInPage!="undefined"&&SMInPage&&m<(s-1)){m++;
SMInPage.destroy();SMInPage.b.tag_desktop=i.ads.tags[m];SMInPage.b.tag_mobile=i.ads.tags[m];d.debug("Trying fallback tag #"+m+"... "+i.ads.tags[m]);SMInPage.startInPage();o()}else{SMInPage.destroy();n()}}}}};(function(){n();return;window.SMInPageSetUp={c:i.targetSelectorId,adSkip:true,tag_desktop:encodeURIComponent(i.ads.tags[m]),tag_mobile:encodeURIComponent(i.ads.tags[m]),autoplay:1,repeat:true,callback:"SMCallback",passback:"SMpassBack",adeventcallback:"SMAdEvent"};var u,v,w,x;v=document.createElement("script");v.async=true;v.onerror=function(){d.debug("Unable to load VAST worker assets, skipping worker");n()};v.type="text/javascript";w="https:"==document.location.protocol;v.src=(w?"https:":"http:")+"//static.addevweb.com/SMOutstream/SMInPage_3.1/SMInPage.js";x=document.getElementsByTagName("script")[0];x.parentNode.insertBefore(v,x)})()}else{d.debug("No vast tags available");n()}};c.html=function(n,r){if(f.adBlockPresent){return n()}if(i.ads.alternativeHtml){var p=$("<style>").attr("type","text/css");p.text("                .preroll-timeout-message {margin-top:30px;color:#aaa;display:block;height:30px;margin-bottom:5px;text-align:center;font-size:10pt;}                .preroll-timeout-message span {display:block;margin-top:5px;font-size:8pt;}                .preroll-timeout-message.show-disabled {opacity:0;}                .preroll-timeout-skip-message {color:#aaa;text-decoration:underline!important;text-align:center;height:15px;margin-bottom:15px;font-size:10pt;display:block;}                .preroll-timeout-skip-message:hover {color:#fff;}                .preroll-timeout-skip-message.skip-disabled {opacity:0;text-decoration:none!important;}                .preroll-timeout-skip-message.skip-disabled:hover {cursor:default!important;color:#fff;}                #game-player-ad-container {}                #game-player-ad-container iframe {}            ");$("head").append(p);var o=function(t){var s=t.timeout;var u=function(){var v=h.find(".js-timeout-handler");var x=h.find(".js-timeout-skip-handler");
s-=1;if(x.size()>0){if(s<=t.timeoutForSkip){x.removeClass("skip-disabled")}else{x.addClass("skip-disabled")}}else{var w=$("<a href='' class='js-timeout-skip-handler preroll-timeout-skip-message skip-disabled'>"+t.skipMessage+"</a>");w.on("click",function(){t.onComplete(h);return false});h.prepend(w)}if(v.size()>0){v.html(t.message.split("xx").join(s<0?0:s)+"<span>"+t.linksMessage+"</span>");if(s<=t.timeoutForShow){v.removeClass("show-disabled")}else{v.addClass("show-disabled")}}else{h.prepend("<div class='js-timeout-handler preroll-timeout-message show-disabled'>"+t.message.split("xx").join(s)+"<span>"+t.linksMessage+"</span></div>")}if(s>=0){setTimeout(u,1000)}else{t.onComplete(h)}};if(h.size()>0){h.prepend(i.ads.alternativeHtml);u();t.onStart(h)}else{t.onError(h)}};var m=1;var q={timeout:20*m,timeoutForShow:(20*m)-1,timeoutForSkip:(20*m)-2,message:i.message+"...",linksMessage:i.linksMessage,skipMessage:i.skipMessage,onStart:function(s){d.triggerEvent("ad_play","html")},onComplete:function(s){if(r!==undefined&&typeof r=="function"){r()}d.triggerEvent("ad_completed",f)},onError:function(s){if(r!==undefined&&typeof r=="function"){r()}d.triggerEvent("ad_completed",f)}};o(q)}else{n()}}}function MiniPlayPrerollManagerHandlerDispatcher(e,c){var f=null;var d=new MiniPlayPrerollManagerCommonHandler(this,e,c);if(e.handlerType==="game"){f=new MiniPlayPrerollManagerGamesHandler(this,e,c)}else{if(e.handlerType==="video"){f=new MiniPlayPrerollManagerVideosHandler(this,e,c)}}this.triggerEvent=function(g,j,h){if(g==="ad_completed"&&c.adCompleted){return}try{this.debug("Event triggered > "+g+" "+(j!==undefined?JSON.stringify(j):"")+" "+(h!==undefined?JSON.stringify(h):""))}catch(i){this.debug("Event triggered > "+g+" unserializable data")}if(d){d.triggerEvent(g,j||null,h||null);if(d.hasOwnProperty(g)&&typeof d[g]==="function"){d[g](j||null,h||null)}}if(f){f.triggerEvent(g,j||null,h||null);if(f.hasOwnProperty(g)&&typeof f[g]==="function"){f[g](j||null,h||null)}}};this.debug=function(h,g){if(e.debug&&typeof window.console!=="undefined"){if(g!==undefined&&h!==undefined){console.log("%cMP Preroll: %s %o","color: #da55ba",h,g)
}else{console.log("%cMP Preroll: %s","color: #da55ba",h)}}};this.debug("Ready with configuration",e);this.debug("Handler type: "+(f?f.type.toUpperCase():"NONE"))}function MiniPlayPrerollManagerCommonHandler(d,e,c){this.type="common";this.triggerEvent=function(f,h,g){if(this.hasOwnProperty(f)&&typeof this[f]==="function"){this[f](h||null,g||null)}};this.ad_ready=function(f){c.adInitialized=true;if(typeof MP!=="undefined"&&MP&&MP.hasOwnProperty("lib")&&MP.lib.hasOwnProperty("adBlockEnabled")&&typeof MP.lib.adBlockEnabled==="function"){if(MP.lib.adBlockEnabled()){c.adBlockPresent=true}}};this.ad_dispatch=function(f){};this.ad_request=function(f){c.adRequests.push(f)};this.ad_request_completed=function(f){c.adRequestsCompleted.push(f)};this.ad_fallback=function(f){c.adFallbacks.push(f)};this.ad_play=function(g,f){c.adDisplayed=g;MP.trackAnalyticsEvent(["_trackEvent","Preroll","Preroll-"+e.handlerType,"play-"+g]);if(f){MP.trackAnalyticsEvent(["_trackEvent","Preroll","Preroll-"+e.handlerType,"play-"+g+"|"+f])}};this.ad_completed=function(f){if(!f.adCompleted){f.adCompleted=true;if(f.adDisplayed){MP.trackAnalyticsEvent(["_trackEvent","Preroll","Preroll-"+e.handlerType,"completed-with-ad"])}else{if(f.adBlockPresent){MP.trackAnalyticsEvent(["_trackEvent","Preroll","Preroll-"+e.handlerType,"completed-adblock"])}else{MP.trackAnalyticsEvent(["_trackEvent","Preroll","Preroll-"+e.handlerType,"completed-noads"])}}}};this.all_ads_failed=function(){c.allAdsFailed=true};this.ad_disabled=function(){c.adDisabled=true}}function MiniPlayPrerollManagerGamesHandler(d,e,c){this.type="game";this.triggerEvent=function(f,h,g){if(MP.hasOwnProperty("game")&&MP.game){MP.game.triggerEvent(f,h||null,g||null)}};this.ad_play=function(g,f){};this.ad_request=function(f){if(f==="vast"){}};this.ad_request_completed=function(f){if(f==="vast"){}};this.ad_completed=function(f){if(f.adBlockPresent){if(typeof console!=="undefined"){d.debug("Tienes AdBlock! \u274C \u274C \u274C \u274C")}}if(f.adDisplayed){if(typeof console!=="undefined"){d.debug("Muchas gracias por la espera! \u2764 \u2764 \u2764 \u2764")
}}else{if(typeof console!=="undefined"){d.debug("No hay anuncios \u270C")}}}}function MiniPlayPrerollManagerVideosHandler(d,e,c){this.type="video";this.triggerEvent=function(f,h,g){if(MP.lazy.hasOwnProperty("videos")&&MP.lazy.videos){MP.lazy.videos.triggerEvent(f,h||null,g||null)}};this.ad_completed=function(f){if(f.adDisplayed){}else{}}};